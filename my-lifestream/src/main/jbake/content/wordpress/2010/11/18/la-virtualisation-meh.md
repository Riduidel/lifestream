type: post
status: published
title: La virtualisation ? Meh !
tags: os, virtualisation, windows
date: Thu Nov 18 14:04:50 CET 2010
~~~~~~
# La virtualisation ? Meh !

Pour mon travail, je dois utiliser une "[machine virtuelle](http://fr.wikipedia.org/wiki/Machine_virtuelle)". Un Linux (une saloperie de vieille [Suse](http://fr.wikipedia.org/wiki/SUSE), en fait) qui, au lieu de tourner sur une machine physique, tourne sur une machine qui est en fait un process d'une autre machine. Si ??a vous fait penser ?? [Egan](http://fr.wikipedia.org/wiki/Greg_Egan), c'est normal, c'est exactement [La Cit?? des Permutants](http://www.goodreads.com/review/show/35699601), mais en vrai.  
Donc pour ??a, j'ai le choix entre [VirtualBox](http://www.virtualbox.org/) et [VMWare Player](http://www.vmware.com/fr/products/player/) (m??me si le choix officiel d??fini par le [PolitBuro](http://fr.wikipedia.org/wiki/Politburo) est ??videment VMWare). Et je dois dire que le choix aurait pour ma part ??t?? vite fait en faveur de VirtualBox, qui est bien plus ouvert (m??me si il a [un petit bug d'installation quand DropBox est lan????](http://forums.virtualbox.org/viewtopic.php?f=6&t=31664)). Parce qu'en fait, VMWare Player est "deffective by design". Ca n'est pas que VMWare Player contient des [DRMs](http://www.defectivebydesign.org/), non, c'est plut??t qu'il est con??u et lvir?? de fa??on qu'une de ses fonctionnalit??s les plus int??ressantes ne marchent pas. Et il ne fait aucun doute dans mon esprit que ce dysfonctionnement est connu et surtout pr??vu.

Supposons donc que vous ayez, sur votre ordinateur utilisant Windows, plusieurs interfaces r??seau. C'est par exemple le cas si vous avez install?? VirtualBox ou un quelconque client VPN. Bien. Dans ce cas, si vous utilisez une VM avec VMWare en mode bridge, cette VM va se connecter ?? votre r??seau local en utilisant une carte r??seau *au hasard* (bon, en fait, ??a s'appelle le mode automatique, mais ??a revient au m??me). Du coup, il y a de fortes chances que votre VM ne se connecte pas au r??seau (typiquement, si au lieu de demander un serveur DHCP ?? la carte r??seau physique elle demande ?? la carte r??seau "Virtual Box Host Only Network"). Comment corriger ??a ? Sans doute (mais c'est du mauvais esprit de ma part) qu'un conseiller support de VMWare vous conseillerait d'acheter VMWare Workstation. Seulement il n'y en a pas besoin.En fait, pour configurer le comportement de VMWare Player, il existe un ex??cutable, sobrement appel?? vmnetcfg.exe, qui permet de choisir cette carte r??seau, et bien d'autres param??tres. Cet ex??cutable est livr?? dans l'installateur de VMWare player, mais [il n'est pas install??](http://blog.slucas.fr/blog/vmnetcfg-missing). Apr??s avoir farfouill??, j'ai trouv?? plusieurs pistes d'une solution, que j'ai [synth??tis?? en anglais ici](http://superuser.com/questions/211808/suse-on-vmware-player-in-windows-xp-cant-access-network/211820#211820). Pour les plus anglophobes d'entre vous, la revoici en fran??ais.


1. t??l??chargez l'installeur VMWare player (appelons-le??VMWare_player_install.exe).
2. Lancez l'invite de commande dans le dossier de t??l??chargement
3. Et tapez??VMWare_player_install.exe /e dossier_temporaire
4. Dans dossier_temporaire, il y a un fichier network.cab
5. Ouvrez ce fichier (par exemple avec [7-zip](http://www.7-zip.org/)). Le fichier vmnetcfg.exe doit ??tre dedans
6. Copiez-le dans le dossier o?? VMWare Player est d??ja install?? (sans doute quelque chose comme C:Program FilesVMWareVMWare Player)Je pense que vous en conviendrez sans trop de doute, c'est absolument ignoble. C'est surtout absolument le boulot d'un installeur de faire ??a.Pour la petite histoire, dans ma premi??re bo??te, j'ai ??crit des installeurs [InstallShield](http://fr.wikipedia.org/wiki/InstallShield), alors je sais que ce genre de choses est raisonnablement facile ?? faire dans un installeur.Et du coup, je suis certain qu'il ne s'agit pas d'un accident, mais d'une fonctionnalit?? oubli??e ?? dessein.Ce qui me fait logiquement penser que VirtualBox vaut bien mieux que VMWare Player.