type: post
status: published
title: Commons VFS
tags: java, librairie, ssh
date: Fri Sep 24 14:14:13 CEST 2010
~~~~~~
# Commons VFS

Encore du Java ?  
Ben oui, encore du Java, parce que "le Java, c'est ce que je fais le mieux", comme dirait [Tigrou](http://fr.wikipedia.org/wiki/Tigrou).En Java, comme partout, il y a des librairies connues, et d'autres qui le sont moins. Dans les connues, on a ... Struts (enfin, pour les anciens :-)), Hibernate, Spring (quoique Spring soit quand m??me bien plus qu'une simple librairie), et toutes celles qu'on peut trouver dans les CVs des gens bien comme il faut.Et puis ?? c??t??, il y a toutes ces librairies bien pratiques, mais dont on ne parle jamais assez. Moi, par exemple, dans mon sac ?? malices, j'en ai quand m??me un paquet ... dont je ne parlerai pas ici, en fait. Mais regardez par exemple [The Best Java Tools You Never Knew Existed](http://www.dubjug.org/node/103) et dites moi combien de ces librairies vous connaissez ? C'est simple, c'est l?? que j'ai entendu parler pour la premi??re fois de [Joda Time](http://joda-time.sourceforge.net/) (qui est une librairie formidable, mais qui n'est pas le sujet). Et si vous faites l'erreur de demander ?? des d??veloppeurs [quelle est leur librairie pr??f??r??e](http://stackoverflow.com/questions/130095/most-useful-free-third-party-java-libraries), vous obtiendrez autant de r??ponses que de d??veloppeurs (??tant entendu de plus que [Apache Commons ](http://commons.apache.org/)n'est pas une librairie, mais un regroupement de tout un tas de "composants" qui sont en fait chacun des projets quasilment ind??pendants).Il y a cependant dans Apache Commons quelques bons projets : 
* [CLI](http://commons.apache.org/cli/) (qui est utilis?? par [Groovy](http://groovy.codehaus.org/gapi/groovy/util/CliBuilder.html)), 
* [Configuration](http://commons.apache.org/configuration/) (que j'ai utilis?? dans je ne sais plus quel projet pour lire des options, les r????crire, et tutti quanti), 
* [JXPath](http://commons.apache.org/jxpath/) (que je n'ai jamais utilis??, mais dont le principe m??me me semble marrant, quoiqu'en fait, de nos jours, on ferait plut??t appel ?? [LambdaJ](http://code.google.com/p/lambdaj/) pour ce genre de choses),
* [Sanselan](http://commons.apache.org/sanselan/) (que je voulais utiliser ?? un moment quand je pensais que refaire iPhoto en java, c'??tait [envisageable](http://code.google.com/p/jphotoorganizer/))Et, last but not least, [VFS](http://commons.apache.org/vfs/).VFS, c'est un peu le [FUSE](http://fuse.sourceforge.net/) du monde Java. Bon, dit comme ??a, ??a n'??claircit pas les id??es ?? grand monde, hein. En fait, avec VFS, vous pouvez vous connecter ?? [un paquet de syst??mes diff??rents](http://commons.apache.org/vfs/filesystems.html), pour les voir comme des objets Java classiques, et travailler dessus ?? distance. A l'usage, c'est assez pratique. Mis ?? part bien s??r [un l??ger souci](http://mail-archives.apache.org/mod_mbox/commons-user/201009.mbox/%3cAANLkTink-1qgKoCAuKeBuKcVozKVJK=6zUosMQWyfzhU@mail.gmail.com%3e), qui fait que les liens symboliques acc??d??s en [SFTP](http://fr.wikipedia.org/wiki/SSH_file_transfer_protocol) ne sont pas lus comme des liens symboliques, mais comme de simples fichiers. Cela dit, c'est quand m??me bien pratique pour se connecter ?? un serveur SFTP et en manipuler les fichiers s'en trop s'emb??ter avec les histoires de protocole [SSH](http://fr.wikipedia.org/wiki/Secure_Shell) (qui sont toujours trop compliqu??es).En fait, ?? bien y r??fl??chir, le principal probl??me avec VFS, c'est que les objets [fichier](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs/FileObject.html) ne sont pas ceux de [Java](http://download-llnw.oracle.com/javase/6/docs/api/java/io/File.html), mais d'autres. C'est un peu emb??tant, puisqu'on ne peut pas utiliser les librairies qui prennent des File en param??tre, mais ??a n'est pas trop grave, puisque de toute fa??on, je trouve cette partie de l'API pas forc??ment bien pens??e.Donc, la prochaine fois que vous voulez acc??der ?? un syst??me de fichier exotique, n'??hsitez pas, pensez ?? commons VFS. Surtout, par exemple, si vous devez ??crire le code d'interconnexion. Plut??t que de vous emb??ter avec les File, venez directement ??crire un [FileSystem](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs/FileSystem.html) pour VFS, et le reste du boulot sera fait !