type: post
status: published
title: Exemples d'utilisation de PostGis
tags: code, informatique, java
date: Thu Oct 19 12:29:26 CEST 2006
~~~~~~
# Exemples d'utilisation de PostGis

Attention, vous allez bient??t avoir ici toute une s??rie de posts sur l'int??gration de donn??es carto dans une application JEE, car je bosse l??-dessus actuellement.On a donc d??ja une base Oracle, une appli JEE avec Struts/Spring/Hibernate, et il nous faut maintenant y ajouter des donn??es carto stock??es dans [PostGIS](http://www.postgis.fr "PostGIS.fr | Le site de la communautÃ© des utilisateurs de PostGIS francophones.")<i class="footnote">(On a d?? ajouter une base PostGIS car, si le stockage de donn??es cartographiques est possible dans Oracle, leur exploitation via des requ??tes cartographiques (du genre donne-moi tous les polygones ?? moins de 10 km de ce point) n'est possible qu'en utilisant Oracle Spatial, une option ?? 30 K???)</i>. Et on va exploiter sur le poste client [OpenJUMP](http://openjump.org/wiki/show/HomePage "OpenJUMP"), en y ajoutant peut-??tre m??me c??t?? serveur [geotools](http://geotools.codehaus.org/ "GeoTools -"). Bref, ??a fait un gros tas de truc carto.Hier, j'ai donc lanc?? mon premier test de connexion ?? ma base de donn??es PostGIS en Java en suivant [ce tutorial](http://www.postgis.fr/node/207 "4.8. Clients Java  (JDBC) | PostGIS.fr"). Malheureusement, il n'est pas tout ?? fait ?? jour. Du coup, un certain nombre de choses changent :
* La m??thode addDataType(String, String) de org.postgresql.Connection est d??pr??ci??e et remplac??e par la plus ??l??gante addDataType(String, Class), ce qui change les deux lignes d'ajout de types g??opm??triques de cette mani??re :

<pre>* Ajout du type g??om??trique ?? la connection. Notez que vous devez effectuer* une convertion de type pour la connection avant de faire app??le ?? la m??thode* addDataType().*/((org.postgresql.Connection)conn).addDataType("geometry",org.postgis.PGgeometry.class);((org.postgresql.Connection)conn).addDataType("box3d",org.postgis.PGbox3d.class);</pre>Mais de toute mani??re, ??a ne sert ?? rien car la derni??re version de PostGIS ajoute un `org.postgis.DriverWrapper` qui fait automatiquement cet ajout. Il faut donc simplement changer la classe du Driver et supprimer ces deux lignes.Et du coup, je peux facilement r??cup??rer mon objet g??om??trique.Il faut maintenant que je r??ponde ?? une question d??licate : est-ce que je vais faire tout en JDBC, utiliser Hibernate ou faire confiance ?? un outil suppl??mentaire.via [Nicolas Delsaux's posterous import script](http://riduidel.posterous.com/quest-ce-que-cest-que-ce-flux-qui-clignote)