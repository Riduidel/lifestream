type: post
status: published
title: Salet?? d'encodages !
tags: code, informatique, java
date: Thu Aug 03 12:44:00 CEST 2006
~~~~~~
# Salet?? d'encodages !

Pendant deux jours, je me suis battu avec Tomcat pour arriver à une application full UTF-8. Du coup, je suis passé par toutes les ressources envisageables : [Joel on software](http://www.joelonsoftware.com/articles/Unicode.html "The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!) - Joel on Software"), [deux](http://www.javaworld.com/javaworld/jw-05-2004/jw-0524-i18n.html "End-to-end internationalization of Web applications")[articles](http://www.javaworld.com/javaworld/jw-04-2004/jw-0419-multibytes.html "http://www.javaworld.com/javaworld/jw-04-2004/jw-0419-multibytes.html") sur Javaworld et, finallement, [la solution](http://marc.theaimsgroup.com/?l=tomcat-user&m=104325172707506&w=2 "'request.setCharacterEncoding(charset) problem? - The solution!' - MARC") sur une obscure mailing-list. Comme le dit très bien l'auteur du message, c'est manifestement un bug si la [RequestDumperValve](http://www.koders.com/java/fid998CD923F9D6A959FE5FB7880A26ADB808D36118.aspx?s=requestdumpervalve "Koders - RequestDumperValve.java") utilise la ParameterMap de la requête, forçant par cette action son encoding. A ce propos, allez donc voir [le bugzilla de Tomcat](http://issues.apache.org/bugzilla/show_bug.cgi?id=40177 "Bug 40177 - RequestDumperValve causes getCharacterEncoding to be called")

During two days, I fought with Tomcat for obtaining a full UTF-8 application. I had so to browse all resources concerning encoding  : [Joel on software](http://www.joelonsoftware.com/articles/Unicode.html "The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!) - Joel on Software"), [two](http://www.javaworld.com/javaworld/jw-05-2004/jw-0524-i18n.html "End-to-end internationalization of Web applications")[articles](http://www.javaworld.com/javaworld/jw-04-2004/jw-0419-multibytes.html "http://www.javaworld.com/javaworld/jw-04-2004/jw-0419-multibytes.html") on Javaworld and, finally, [the solution](http://marc.theaimsgroup.com/?l=tomcat-user&m=104325172707506&w=2 "'request.setCharacterEncoding(charset) problem? - The solution!' - MARC") on an obscure mailing-list. Like the message author says very well, it's obviously a bug if the [RequestDumperValve](http://www.koders.com/java/fid998CD923F9D6A959FE5FB7880A26ADB808D36118.aspx?s=requestdumpervalve "Koders - RequestDumperValve.java") uses the request ParameterMap, forcing its encoding. Talking about that, go check the [Tomcat bugzilla](http://issues.apache.org/bugzilla/show_bug.cgi?id=40177 "Bug 40177 - RequestDumperValve causes getCharacterEncoding to be called")via [Nicolas Delsaux's posterous import script](http://riduidel.posterous.com/quest-ce-que-cest-que-ce-flux-qui-clignote)