type: post
status: published
title: Posterous backup script v2
tags: groovy, html, posterousbackup
date: Fri Jul 08 09:30:00 CEST 2011
~~~~~~
# Posterous backup script v2

As a follow-up to [Posterous official blog message](http://blog.posterous.com/we-asked-you-told-us-top-10-requests-for-post) concerning most wanted feature, here is great (or maybe not) news for you, users of posterous backup script.I've just released v2.1 of Posterous backup script.Why such a tremendous version jump ?Because many things changed in that little script.

<span style="font-size:medium;">New and noteworthy</span>
* First, the script now uses [Posterous API](http://posterous.com/api), thanks to the greatness of [Groovy HTTP Builder](http://groovy.codehaus.org/modules/http-builder/download.html).
* What's more, I now export not only posts, but also tags and pages, leading to an updated organization : each of your posterous site now have, under its very own folder, the following architecture<span style="font-family:courier new, monospace;"><a href="http://riduidel.posterous.com">riduidel.posterous.com</a></span><span style="font-family:courier new, monospace;">  +--- pages</span><span style="font-family:courier new, monospace;">  |      +--- list of your user pages</span><span style="font-family:courier new, monospace;">  +--- tags</span><span style="font-family:courier new, monospace;">  |      +--- list of your tags, for each the generated page contains all associated posts</span><span style="font-family:courier new, monospace;">  +--- posts</span><span style="font-family:courier new, monospace;">  |      +--- list of your all your posts</span><span style="font-family:courier new, monospace;">  +--- images</span><span style="font-family:courier new, monospace;">  |      +--- list of all images used in both your posts and page. For each, both thumbnail and full size image are downloaded</span><span style="font-family:courier new, monospace;">  +--- audio_files</span><span style="font-family:courier new, monospace;">  |      +--- list of all audio used in both your posts and page.</span><span style="font-family:courier new, monospace;">  +--- videos</span><span style="font-family:courier new, monospace;">  |      +--- list of all videos used in both your posts and page.</span><span style="font-family:courier new, monospace;">  +--- posts.html           # a page listing all your posts</span><span style="font-family:courier new, monospace;">  +--- pages.html           # a page listing all your pages</span><span style="font-family:courier new, monospace;">  +--- tags.html            # a page listing all your tags</span>

Actually, the links are not exported. Do you want me to export them ? If so, how ?
* Concerning page content, even if the layout is far simpler than elegant layouts found on our beloved site, I tried to respect, as far as possible, [microformats](http://microformats.org/) recomendations. As a consequence, posts are written using [hatom](http://microformats.org/wiki/hatom) hentry, users infos (in posts and comments) are written using [hcard](http://microformats.org/wiki/hcard), which theorically makes CSS skinning easy (even if I've not yet thought about it, I must confess)<span style="font-size:medium;">The mandatory how-to</span>

Concerning the usage guide of that script, nothing has changed (more or less) since [initial release of v1](http://riduidel.posterous.com/posterous-backup-beta-reached) : you must still install both Java and Groovy. Since I've kept v1 of that script, you now download it at [http://dl.dropbox.com/u/2753331/posterous_2.groovy](http://dl.dropbox.com/u/2753331/posterous_2.groovy) and then run it using Groovy using either standard command line :

<span style="font-family:courier new, monospace;">groovy posterous_2.groovy</span>

which will show you the available options :

<span style="font-family:courier new, monospace;">This is posterous export script v 2.1<br></br> 2.1 is mainly due to the use of posterous api, instead of old-style http queries<br></br>You like that script ? You already use flattr ? Please go to <a href="http://flattr.com/thing/54243/Posterous-backup-script">http://flattr.com/thing/54243/Posterous-backup-script</a> to sh<br></br> ow your appreciation<br></br>error: Missing required options: u, p, o<br></br>usage: groovy posterous.groovy<br></br> -f,--forceRewrite When present, all sites are regenerated. Existing<br></br> data on disk is totally wiped out<br></br> -h,--help provides full help and usage information<br></br> -o,--output <arg> An eventually existing output folder, where all<br></br> data will be output. Beware, if some data exists in<br></br> that folder, it may be overwritten.<br></br> -p,--password <arg> Unfortunatly one have to give its password to this<br></br> little script<br></br> -s,--separeMedia Separates media from posts directory. When set, all<br></br> medias are copied in subfolders of output folders<br></br> named as posts they're associated with. This option<br></br> is by request of Eli Weinberg, with my best wishes.<br></br> -u,--username <arg> Sets posterous mail address here</span>

Besides, you may have notice some options changes : the <span style="font-family:courier new, monospace;">-downloadThumbnails</span> options has been removed, and <span style="font-family:courier new, monospace;">-forceRewrite</span> option to ensure previous files were removed has been added.As for version 1, you can still be sure to always [launch latest script version](http://riduidel.posterous.com/always-launch-latest-version-of-posterous-bac) but be sure to change used URL, otherwise result won't necessary meet your expectations.



<span style="font-size:medium;">Troubleshooting guide ?</span>

Naaah, there does not seems to be that much issues for that over-simple script written on the shoulders of giants.Anway, if you really want to ask, this script **is** slow, and [it's a known problem](http://riduidel.posterous.com/why-posterous-backup-script-execution-takes) (but there is nothing I can do) (except re-writing it in Java with great usage of multi-threading for parallelizing posts and medias downloads ... well, Ok, I've thought about that, but I won't implement it before ... v2.2).